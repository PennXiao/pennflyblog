<h2 id="php-curl使用说明与范例">PHP curl使用说明与范例</h2>

<h3 id="依赖">依赖</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl 依赖PHP curl 拓展请使用php -m检查环境拓展 
</code></pre></div></div>

<h3 id="demo---curl">demo - Curl</h3>

<h4 id="init創建curl資源">init創建Curl資源</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 创建一个新cURL资源
$ch = curl_init();
</code></pre></div></div>

<h4 id="设置curl传输详情">设置Curl传输详情</h4>
<p>单个设置</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 设置 cURL 传输选项 
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, 0);
</code></pre></div></div>

<p>批量設置</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 批量设置 cURL 传输选项 可以与单个设置混合使用
$options = [
	CURLOPT_URL =&gt; 'http://www.example.com/',
	CURLOPT_HEADER =&gt; false
];
curl_setopt_array($ch, $options);
</code></pre></div></div>

<p>參考詳情</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//具体setopt详细参数请参考 http://php.net/manual/zh/function.curl-setopt.php
</code></pre></div></div>

<h4 id="执行curl">执行curl</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if(curl_exec($ch) === false){
	//执行错误处理
}
</code></pre></div></div>

<h4 id="獲取返回資源句柄">獲取返回資源句柄</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//获取获取一个cURL连接资源句柄的信息 
curl_getinfo($ch,句柄常量)
//具体的常量参考 http://php.net/manual/zh/function.curl-getinfo.php
</code></pre></div></div>

<h4 id="關閉curl資源">關閉curl資源</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 关闭cURL资源，并且释放系统资源
curl_close($ch);
</code></pre></div></div>
